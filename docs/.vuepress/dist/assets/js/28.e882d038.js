(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{210:function(a,e,s){"use strict";s.r(e);var t=s(6),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"在centos中安装和配置docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在centos中安装和配置docker"}},[a._v("#")]),a._v(" 在Centos中安装和配置Docker")]),a._v(" "),s("h3",{attrs:{id:"_0-参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-参考"}},[a._v("#")]),a._v(" 0. 参考")]),a._v(" "),s("p",[a._v("https://docs.docker.com/engine/install/centos/")]),a._v(" "),s("h3",{attrs:{id:"_1-卸载docker旧版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载docker旧版本"}},[a._v("#")]),a._v(" 1. 卸载Docker旧版本")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum remove docker "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-common "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-engine\n")])])]),s("h3",{attrs:{id:"_2-安装前置包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装前置包"}},[a._v("#")]),a._v(" 2. 安装前置包")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y yum-utils\n")])])]),s("h3",{attrs:{id:"_3-设置镜像仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置镜像仓库"}},[a._v("#")]),a._v(" 3. 设置镜像仓库")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    https://download.docker.com/linux/centos/docker-ce.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 国内镜像")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),s("h3",{attrs:{id:"_4-更新yum软件包索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-更新yum软件包索引"}},[a._v("#")]),a._v(" 4. 更新yum软件包索引")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum makecache fast\n")])])]),s("h3",{attrs:{id:"_5-安装docker引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装docker引擎"}},[a._v("#")]),a._v(" 5. 安装Docker引擎")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce docker-ce-cli containerd.io\n")])])]),s("h3",{attrs:{id:"_6-启动docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动docker"}},[a._v("#")]),a._v(" 6. 启动Docker")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start docker\n")])])]),s("p",[a._v("未启动前执行"),s("code",[a._v("docker version")]),a._v("结果：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("Client: Docker Engine - Community\n Version:           "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.10")]),a._v(".1\n API version:       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.41")]),a._v("\n Go version:        go1.13.15\n Git commit:        831ebea\n Built:             Tue Dec "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" 04:37:17 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2020")]),a._v("\n OS/Arch:           linux/amd64\n Context:           default\n Experimental:      "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nCannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\n")])])]),s("p",[a._v("启动后执行"),s("code",[a._v("docker version")]),a._v("结果：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Client: Docker Engine - Community\n Version:           20.10.1\n API version:       1.41\n Go version:        go1.13.15\n Git commit:        831ebea\n Built:             Tue Dec 15 04:37:17 2020\n OS/Arch:           linux/amd64\n Context:           default\n Experimental:      true\n\nServer: Docker Engine - Community\n Engine:\n  Version:          20.10.1\n  API version:      1.41 (minimum version 1.12)\n  Go version:       go1.13.15\n  Git commit:       f001486\n  Built:            Tue Dec 15 04:35:42 2020\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.4.3\n  GitCommit:        269548fa27e0089a8b8278fc4fc781d7f65a939b\n runc:\n  Version:          1.0.0-rc92\n  GitCommit:        ff819c7e9184c13b7c2607fe6c30ae19403a7aff\n docker-init:\n  Version:          0.19.0\n  GitCommit:        de40ad0\n")])])]),s("h3",{attrs:{id:"_6-验证docker安装结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-验证docker安装结果"}},[a._v("#")]),a._v(" 6. 验证Docker安装结果")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("docker run hello-world\n")])])]),s("p",[a._v("查看Docker 镜像：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker images\n")])])]),s("h3",{attrs:{id:"_7-备-卸载docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-备-卸载docker"}},[a._v("#")]),a._v(" 7. （备）卸载Docker")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum remove docker-ce docker-ce-cli containerd.io "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 卸载依赖")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf /var/lib/docker "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除资源 【/var/lib/docker】为docker的默认工作路径")]),a._v("\n")])])]),s("h3",{attrs:{id:"_8-配置镜像加速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-配置镜像加速"}},[a._v("#")]),a._v(" 8. 配置镜像加速")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('sudo mkdir -p /etc/docker\n\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://01sbi4j3.mirror.aliyuncs.com"]\n}\nEOF\n\nsudo systemctl daemon-reload\n\nsudo systemctl restart docker\n')])])]),s("h3",{attrs:{id:"_9-图形化管理工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-图形化管理工具"}},[a._v("#")]),a._v(" 9. 图形化管理工具")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("docker run -d -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8088")]),a._v(":9000 --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always -v /var/run/docker.sock:/var/run/docker.sock --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true portainer/portainer\n")])])]),s("h3",{attrs:{id:"_10-数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-数据卷"}},[a._v("#")]),a._v(" 10. 数据卷")])])}),[],!1,null,null,null);e.default=r.exports}}]);